<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The posterior R package • posterior</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The posterior R package">
<meta property="og:description" content="posterior">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">posterior</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fas fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/posterior">
    <span class="fas fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fas fa-users"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="posterior_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The posterior R package</h1>
                        <h4 class="author">Paul Bürkner, Jonah Gabry, Matthew Kay, and Aki Vehtari</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/stan-dev/posterior/blob/master/vignettes/posterior.Rmd"><code>vignettes/posterior.Rmd</code></a></small>
      <div class="hidden name"><code>posterior.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The posterior R package is intended to provide useful tools for both users and developers of packages for fitting Bayesian models or working with output from Bayesian models. The primary goals of the package are to:</p>
<ul>
<li>Efficiently convert between many different useful formats of draws (samples) from posterior or prior distributions.</li>
<li>Provide consistent methods for operations commonly performed on draws, for example, subsetting, binding, or mutating draws.</li>
<li>Provide various summaries of draws in convenient formats.</li>
<li>Provide lightweight implementations of state of the art posterior inference diagnostics.</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The package is not on CRAN yet, but you can install the latest beta release version via</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"posterior"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"https://mc-stan.org/r-packages/"</span>, <span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">"repos"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>or the latest development version from GitHub via</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"stan-dev/posterior"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://mc-stan.org/posterior/">"posterior"</a></span><span class="op">)</span></code></pre></div>
<pre><code>## This is posterior version 0.1.6</code></pre>
<pre><code>## 
## Attaching package: 'posterior'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     mad, sd, var</code></pre>
<p>To demonstrate how to work with the posterior package, throughout the rest of this vignette we will use example posterior draws obtained from the eight schools hierarchical meta-analysis model described in Gelman et al. (2013). The variables are an estimate per school (<code>theta[1]</code> through <code>theta[8]</code>) as well as an overall mean (<code>mu</code>) and standard deviation across schools (<code>tau</code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eight_schools_array</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/example_draws.html">example_draws</a></span><span class="op">(</span><span class="st">"eight_schools"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eight_schools_array</span>, max_variables <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_array: 100 iterations, 4 chains, and 10 variables
## , , variable = mu
## 
##          chain
## iteration   1    2     3   4
##         1 2.0  3.0  1.79 6.5
##         2 1.5  8.2  5.99 9.1
##         3 5.8 -1.2  2.56 0.2
##         4 6.8 10.9  2.79 3.7
##         5 1.8  9.8 -0.03 5.5
## 
## , , variable = tau
## 
##          chain
## iteration   1    2    3   4
##         1 2.8 2.80  8.7 3.8
##         2 7.0 2.76  2.9 6.8
##         3 9.7 0.57  8.4 5.3
##         4 4.8 2.45  4.4 1.6
##         5 2.8 2.80 11.0 3.0
## 
## , , variable = theta[1]
## 
##          chain
## iteration     1     2    3     4
##         1  3.96  6.26 13.3  5.78
##         2  0.12  9.32  6.3  2.09
##         3 21.25 -0.97 10.6 15.72
##         4 14.70 12.45  5.4  2.69
##         5  5.96  9.75  8.2 -0.91
## 
## # ... with 95 more iterations, and 7 more variables</code></pre>
<p>The structure of this object is explained in the next section.</p>
</div>
<div id="draws-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#draws-formats" class="anchor"></a>Draws formats</h2>
<div id="available-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#available-formats" class="anchor"></a>Available formats</h3>
<p>Because different formats are preferable in different situations, posterior supports multiple formats and easy conversion between them. The currently supported formats are:</p>
<ul>
<li>
<code>draws_array</code>: An iterations by chains by variables array.</li>
<li>
<code>draws_matrix</code>: A draws (iterations x chains) by variables array.</li>
<li>
<code>draws_df</code>: A draws by variables data frame with addition meta columns <code>.chain</code>, <code>.iteration</code>, <code>.draw</code>.</li>
<li>
<code>draws_list</code>: A list with one sublist per chain. Each sublist is a named list with one vector of iterations per variable.</li>
<li>
<code>draws_rvars</code>: A list of random variable <code>rvar</code> objects, one per variable. See <code><a href="../articles/rvar.html">vignette("rvar")</a></code> for an introduction to this new data type.</li>
</ul>
<p>These formats are essentially base R object classes and can be used as such. For example, a <code>draws_matrix</code> object is just a <code>matrix</code> with a little more consistency (e.g., no dropping of dimensions with one level when indexing) and additional methods. The exception to this is the <code>draws_rvars</code> format, which contains <code>rvar</code> objects that behave somewhat like arrays but are really a unique data type. See the separate vignette on the <code>rvar</code> and <code>draws_rvars</code> data types for details.</p>
<p>The draws for our example come as a <code>draws_array</code> object with 100 iterations, 4 chains, and 10 variables:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">eight_schools_array</span><span class="op">)</span></code></pre></div>
<pre><code>##  'draws_array' num [1:100, 1:4, 1:10] 2.01 1.46 5.81 6.85 1.81 ...
##  - attr(*, "dimnames")=List of 3
##   ..$ iteration: chr [1:100] "1" "2" "3" "4" ...
##   ..$ chain    : chr [1:4] "1" "2" "3" "4"
##   ..$ variable : chr [1:10] "mu" "tau" "theta[1]" "theta[2]" ...</code></pre>
</div>
<div id="converting-between-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#converting-between-formats" class="anchor"></a>Converting between formats</h3>
<p>Each of the formats has a method <code>as_draws_&lt;format&gt;</code> (e.g., <code><a href="../reference/draws_list.html">as_draws_list()</a></code>) for creating an object of the class from any of the other formats. As a demonstration we can convert the example <code>draws_array</code> to a <code>draws_df</code>, a data frame with additional meta information. To convert to a <code>draws_df</code> we use <code><a href="../reference/draws_df.html">as_draws_df()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eight_schools_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_df.html">as_draws_df</a></span><span class="op">(</span><span class="va">eight_schools_array</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">eight_schools_df</span><span class="op">)</span></code></pre></div>
<pre><code>## draws_df [400 × 13] (S3: draws_df/draws/tbl_df/tbl/data.frame)
##  $ mu        : num [1:400] 2.01 1.46 5.81 6.85 1.81 ...
##  $ tau       : num [1:400] 2.77 6.98 9.68 4.79 2.85 ...
##  $ theta[1]  : num [1:400] 3.962 0.124 21.251 14.7 5.96 ...
##  $ theta[2]  : num [1:400] 0.271 -0.069 14.931 8.586 1.156 ...
##  $ theta[3]  : num [1:400] -0.743 0.952 1.829 2.675 3.109 ...
##  $ theta[4]  : num [1:400] 2.1 7.28 1.38 4.39 1.99 ...
##  $ theta[5]  : num [1:400] 0.923 -0.062 0.531 4.758 0.769 ...
##  $ theta[6]  : num [1:400] 1.65 11.26 7.16 8.1 4.66 ...
##  $ theta[7]  : num [1:400] 3.32 9.62 14.8 9.49 1.21 ...
##  $ theta[8]  : num [1:400] 4.85 -8.64 -1.74 5.28 -4.54 ...
##  $ .chain    : int [1:400] 1 1 1 1 1 1 1 1 1 1 ...
##  $ .iteration: int [1:400] 1 2 3 4 5 6 7 8 9 10 ...
##  $ .draw     : int [1:400] 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eight_schools_df</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_df: 100 iterations, 4 chains, and 10 variables
##      mu tau theta[1] theta[2] theta[3] theta[4] theta[5] theta[6]
## 1  2.01 2.8     3.96    0.271    -0.74      2.1    0.923      1.7
## 2  1.46 7.0     0.12   -0.069     0.95      7.3   -0.062     11.3
## 3  5.81 9.7    21.25   14.931     1.83      1.4    0.531      7.2
## 4  6.85 4.8    14.70    8.586     2.67      4.4    4.758      8.1
## 5  1.81 2.8     5.96    1.156     3.11      2.0    0.769      4.7
## 6  3.84 4.1     5.76    9.909    -1.00      5.3    5.889     -1.7
## 7  5.47 4.0     4.03    4.151    10.15      6.6    3.741     -2.2
## 8  1.20 1.5    -0.28    1.846     0.47      4.3    1.467      3.3
## 9  0.15 3.9     1.81    0.661     0.86      4.5   -1.025      1.1
## 10 7.17 1.8     6.08    8.102     7.68      5.6    7.106      8.5
## # ... with 390 more draws, and 2 more variables
## # ... hidden reserved variables {'.chain', '.iteration', '.draw'}</code></pre>
</div>
<div id="converting-regular-r-objects-to-draws-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#converting-regular-r-objects-to-draws-formats" class="anchor"></a>Converting regular R objects to <code>draws</code> formats</h3>
<p>The example draws already come in a format natively supported by posterior, but we can of course also import the draws from other sources like common base R objects.</p>
<div id="example-create-draws_matrix-from-a-matrix" class="section level4">
<h4 class="hasAnchor">
<a href="#example-create-draws_matrix-from-a-matrix" class="anchor"></a>Example: create draws_matrix from a matrix</h4>
<p>In addition to converting other <code>draws</code> objects to the <code>draws_matrix</code> format, the <code><a href="../reference/draws_matrix.html">as_draws_matrix()</a></code> function will convert a regular matrix to a <code>draws_matrix</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">10</span>, ncol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"V"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_matrix.html">as_draws_matrix</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_matrix: 10 draws, and 5 variables
##     variable
## draw     V1     V2      V3    V4     V5
##   1   1.116  0.299  0.8017 -0.67  1.990
##   2  -1.237  0.809  0.3937 -0.70 -1.043
##   3   0.227 -2.705  0.4135  1.65  0.063
##   4   0.030  0.859 -0.0031 -0.30 -1.002
##   5  -1.349  1.280 -1.5500 -3.05 -0.108
##   6   2.342 -0.077 -0.5724  1.53  0.922
##   7  -1.178  0.207 -0.0913 -1.42  0.338
##   8  -1.252 -0.045 -0.9080 -0.98 -1.105
##   9   0.049 -0.905  1.5916 -0.57  0.681
##   10  0.225 -1.246 -0.6257  0.77 -0.928</code></pre>
<p>Because the matrix was converted to a <code>draws_matrix</code>, all of the methods for working with <code>draws</code> objects described in subsequent sections of this vignette will now be available.</p>
<p>Instead of <code><a href="../reference/draws_matrix.html">as_draws_matrix()</a></code> we also could have just used <code><a href="../reference/draws.html">as_draws()</a></code>, which attempts to find the closest available format to the input object. In this case the result would be a <code>draws_matrix</code> object either way.</p>
</div>
<div id="example-create-draws_matrix-from-multiple-vectors" class="section level4">
<h4 class="hasAnchor">
<a href="#example-create-draws_matrix-from-multiple-vectors" class="anchor"></a>Example: create draws_matrix from multiple vectors</h4>
<p>In addition to the <code><a href="../reference/draws_matrix.html">as_draws_matrix()</a></code> converter function there is also a <code><a href="../reference/draws_matrix.html">draws_matrix()</a></code> constructor function that can be used to create draws matrix from multiple vectors.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_matrix.html">draws_matrix</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_matrix: 50 draws, and 2 variables
##     variable
## draw   alpha  beta
##   1  -0.7091 -2.72
##   2   0.7820  1.70
##   3  -1.6470 -0.77
##   4  -1.5572  0.66
##   5   0.0478 -0.19
##   6  -0.5372 -0.25
##   7   0.2363 -0.86
##   8  -0.4513  0.50
##   9   0.0027 -1.35
##   10 -0.9152 -0.19
## # ... with 40 more draws</code></pre>
<p>Analogous functions exist for the other draws formats and are used similarly.</p>
</div>
</div>
</div>
<div id="manipulating-draws-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#manipulating-draws-objects" class="anchor"></a>Manipulating <code>draws</code> objects</h2>
<p>The posterior package provides many methods for manipulating draws objects in useful ways. In this section we demonstrate several of the most commonly used methods. These methods, like the other methods in posterior, are available for every supported draws format.</p>
<div id="subsetting" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting" class="anchor"></a>Subsetting</h3>
<p>Subsetting <code>draws</code> objects can be done according to various aspects of the draws (iterations, chains, or variables). The posterior package provides a convenient interface for this purpose via <code><a href="../reference/subset_draws.html">subset_draws()</a></code>. For example, here is the code to extract the first five iterations of the first two chains of the variable <code>mu</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sub_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset_draws.html">subset_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, variable <span class="op">=</span> <span class="st">"mu"</span>, chain <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, iteration <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sub_df</span><span class="op">)</span></code></pre></div>
<pre><code>## draws_df [10 × 4] (S3: draws_df/draws/tbl_df/tbl/data.frame)
##  $ mu        : num [1:10] 2.01 1.46 5.81 6.85 1.81 ...
##  $ .chain    : int [1:10] 1 1 1 1 1 2 2 2 2 2
##  $ .iteration: int [1:10] 1 2 3 4 5 1 2 3 4 5
##  $ .draw     : int [1:10] 1 2 3 4 5 6 7 8 9 10</code></pre>
<p>The same call to <code><a href="../reference/subset_draws.html">subset_draws()</a></code> can be used regardless of the draws format. For example, here is the same code except replacing the <code>draws_df</code> object with the <code>draws_array</code> object.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sub_arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset_draws.html">subset_draws</a></span><span class="op">(</span><span class="va">eight_schools_array</span>, variable <span class="op">=</span> <span class="st">"mu"</span>, chain <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, iteration <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sub_arr</span><span class="op">)</span></code></pre></div>
<pre><code>##  'draws_array' num [1:5, 1:2, 1] 2.01 1.46 5.81 6.85 1.81 ...
##  - attr(*, "dimnames")=List of 3
##   ..$ iteration: chr [1:5] "1" "2" "3" "4" ...
##   ..$ chain    : chr [1:2] "1" "2"
##   ..$ variable : chr "mu"</code></pre>
<p>We can check that these two calls to <code><a href="../reference/subset_draws.html">subset_draws()</a></code> (the first with the data frame, the second with the array) produce the same result.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">sub_df</span>, <span class="fu"><a href="../reference/draws_df.html">as_draws_df</a></span><span class="op">(</span><span class="va">sub_arr</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="fu"><a href="../reference/draws_array.html">as_draws_array</a></span><span class="op">(</span><span class="va">sub_df</span><span class="op">)</span>, <span class="va">sub_arr</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE
## [1] TRUE</code></pre>
<p>It is also possible to use standard R subsetting syntax with <code>draws</code> objects. The following is equivalent to the use of <code><a href="../reference/subset_draws.html">subset_draws()</a></code> with the array above.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eight_schools_array</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="st">"mu"</span><span class="op">]</span></code></pre></div>
<pre><code>## # A draws_array: 5 iterations, 2 chains, and 1 variables
## , , variable = mu
## 
##          chain
## iteration   1    2
##         1 2.0  3.0
##         2 1.5  8.2
##         3 5.8 -1.2
##         4 6.8 10.9
##         5 1.8  9.8</code></pre>
<p>The major difference between how posterior behaves when indexing and how base R behaves is that posterior will <em>not</em> drop dimensions with only one level. That is, even though there is only one variable left after subsetting, the result of the subsetting above is still a <code>draws_array</code> and not a <code>draws_matrix</code>.</p>
</div>
<div id="mutating-transformations-of-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#mutating-transformations-of-variables" class="anchor"></a>Mutating (transformations of variables)</h3>
<p>The magic of having obtained draws from the joint posterior (or prior) distribution of a set of variables is that these draws can also be used to obtain draws from any other variable that is a function of the original variables. That is, if we are interested in the posterior distribution of, say, <code>phi = (mu + tau)^2</code> all we have to do is to perform the transformation for each of the individual draws to obtain draws from the posterior distribution of the transformed variable. This procedure is handled by <code><a href="../reference/mutate_variables.html">mutate_variables()</a></code>.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mutate_variables.html">mutate_variables</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, phi <span class="op">=</span> <span class="op">(</span><span class="va">mu</span> <span class="op">+</span> <span class="va">tau</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset_draws.html">subset_draws</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mu"</span>, <span class="st">"tau"</span>, <span class="st">"phi"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_df: 100 iterations, 4 chains, and 3 variables
##      mu tau   phi
## 1  2.01 2.8  22.8
## 2  1.46 7.0  71.2
## 3  5.81 9.7 240.0
## 4  6.85 4.8 135.4
## 5  1.81 2.8  21.7
## 6  3.84 4.1  62.8
## 7  5.47 4.0  88.8
## 8  1.20 1.5   7.1
## 9  0.15 3.9  16.6
## 10 7.17 1.8  79.9
## # ... with 390 more draws
## # ... hidden reserved variables {'.chain', '.iteration', '.draw'}</code></pre>
</div>
<div id="renaming" class="section level3">
<h3 class="hasAnchor">
<a href="#renaming" class="anchor"></a>Renaming</h3>
<p>To rename variables use <code><a href="../reference/rename_variables.html">rename_variables()</a></code>. Here we rename the scalar <code>mu</code> to <code>mean</code> and the vector <code>theta</code> to <code>alpha</code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># mu is a scalar, theta is a vector</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rename_variables.html">rename_variables</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, mean <span class="op">=</span> <span class="va">mu</span>, alpha <span class="op">=</span> <span class="va">theta</span><span class="op">)</span>
<span class="fu"><a href="../reference/draws-index.html">variables</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "mean"     "tau"      "alpha[1]" "alpha[2]" "alpha[3]" "alpha[4]"
##  [7] "alpha[5]" "alpha[6]" "alpha[7]" "alpha[8]"</code></pre>
<p>In the call to <code><a href="../reference/rename_variables.html">rename_variables()</a></code> above, <code>mu</code> and <code>theta</code> can be quoted or unquoted.</p>
<p>It is also possible to rename individual elements of non-scalar parameters, for example we can rename just the first element of <code>alpha</code>:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rename_variables.html">rename_variables</a></span><span class="op">(</span><span class="va">x</span>, a1 <span class="op">=</span> <span class="va">`alpha[1]`</span><span class="op">)</span>
<span class="fu"><a href="../reference/draws-index.html">variables</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "mean"     "tau"      "a1"       "alpha[2]" "alpha[3]" "alpha[4]"
##  [7] "alpha[5]" "alpha[6]" "alpha[7]" "alpha[8]"</code></pre>
</div>
<div id="binding" class="section level3">
<h3 class="hasAnchor">
<a href="#binding" class="anchor"></a>Binding</h3>
<p>The <code><a href="../reference/bind_draws.html">bind_draws()</a></code> method can be used to combine <code>draws</code> objects along different dimensions. As an example, suppose we have several different <code>draws_matrix</code> objects:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_matrix.html">draws_matrix</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_matrix.html">draws_matrix</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_matrix.html">draws_matrix</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html">rexp</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We can bind <code>x1</code> and <code>x3</code> together along the <code>'variable'</code> dimension to get a single <code>draws_matrix</code> with the variables from both <code>x1</code> and <code>x3</code>:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bind_draws.html">bind_draws</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x3</span>, along <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x4</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_matrix: 5 draws, and 3 variables
##     variable
## draw alpha   beta theta
##    1 -0.26 -0.607  0.11
##    2 -0.95 -0.048  1.48
##    3 -0.92  0.352  0.61
##    4 -0.60 -0.037  0.84
##    5  1.54  0.185  1.17</code></pre>
<p>Because <code>x1</code> and <code>x2</code> have the same variables, we can bind them along the <code>'draw'</code> dimension to create a single <code>draws_matrix</code> with more draws:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bind_draws.html">bind_draws</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, along <span class="op">=</span> <span class="st">"draw"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x5</span><span class="op">)</span></code></pre></div>
<pre><code>## # A draws_matrix: 10 draws, and 2 variables
##     variable
## draw  alpha   beta
##   1  -0.258 -0.607
##   2  -0.953 -0.048
##   3  -0.924  0.352
##   4  -0.604 -0.037
##   5   1.543  0.185
##   6   1.501  0.566
##   7  -0.045  1.030
##   8   0.651  0.689
##   9   0.712 -0.542
##   10  0.641 -1.484</code></pre>
<p>As with all posterior methods, <code><a href="../reference/bind_draws.html">bind_draws()</a></code> can be used with all draws formats and depending on the format different dimensions are available to bind on. For example, we can bind <code>draws_array</code> objects together by <code>iteration</code>, <code>chain</code>, or <code>variable</code>, but a 2-D <code>draws_matrix</code> with the chains combined can only by bound by <code>draw</code> and <code>variable</code>.</p>
</div>
</div>
<div id="summaries-and-diagnostics" class="section level2">
<h2 class="hasAnchor">
<a href="#summaries-and-diagnostics" class="anchor"></a>Summaries and diagnostics</h2>
<div id="summarise_draws-basic-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#summarise_draws-basic-usage" class="anchor"></a>summarise_draws() basic usage</h3>
<p>Computing summaries of posterior or prior draws and convergence diagnostics for posterior draws are some of the most common tasks when working with Bayesian models fit using Markov Chain Monte Carlo (MCMC) methods. The posterior package provides a flexible interface for this purpose via <code><a href="../reference/draws_summary.html">summarise_draws()</a></code> (or <code><a href="../reference/draws_summary.html">summarize_draws()</a></code>), which can be passed any of the formats supported by the package.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># summarise_draws or summarize_draws</span>
<span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 10
##    variable  mean median    sd   mad      q5   q95  rhat ess_bulk ess_tail
##    &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 mu        4.18   4.16  3.40  3.57  -0.854  9.39  1.02     558.     322.
##  2 tau       4.16   3.07  3.58  2.89   0.309 11.0   1.01     246.     202.
##  3 theta[1]  6.75   5.97  6.30  4.87  -1.23  18.9   1.01     400.     254.
##  4 theta[2]  5.25   5.13  4.63  4.25  -1.97  12.5   1.02     564.     372.
##  5 theta[3]  3.04   3.99  6.80  4.94 -10.3   11.9   1.01     312.     205.
##  6 theta[4]  4.86   4.99  4.92  4.51  -3.57  12.2   1.02     695.     252.
##  7 theta[5]  3.22   3.72  5.08  4.38  -5.93  10.8   1.01     523.     306.
##  8 theta[6]  3.99   4.14  5.16  4.81  -4.32  11.5   1.02     548.     205.
##  9 theta[7]  6.50   5.90  5.26  4.54  -1.19  15.4   1.00     434.     308.
## 10 theta[8]  4.57   4.64  5.25  4.89  -3.79  12.2   1.02     355.     146.</code></pre>
<p>The result is a data frame with one row per variable and one column per summary statistic or convergence diagnostic. The summaries <code>rhat</code>, <code>ess_bulk</code>, and <code>ess_tail</code> are described in Vehtari et al. (2020). We can choose which summaries to compute by passing additional arguments, either functions or names of functions. For instance, if we only wanted the mean and its corresponding Monte Carlo Standard Error (MCSE) we could use either of these options:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the function mcse_mean is provided by the posterior package</span>
<span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, <span class="st">"mean"</span>, <span class="st">"mcse_mean"</span><span class="op">)</span> 
<span class="va">s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, <span class="va">mean</span>, <span class="va">mcse_mean</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">s2</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">s1</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    variable  mean mcse_mean
##    &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
##  1 mu        4.18     0.150
##  2 tau       4.16     0.213
##  3 theta[1]  6.75     0.319
##  4 theta[2]  5.25     0.202
##  5 theta[3]  3.04     0.447
##  6 theta[4]  4.86     0.189
##  7 theta[5]  3.22     0.232
##  8 theta[6]  3.99     0.222
##  9 theta[7]  6.50     0.250
## 10 theta[8]  4.57     0.273</code></pre>
</div>
<div id="changing-column-names" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-column-names" class="anchor"></a>Changing column names</h3>
<p>The column names in the output can be changed by providing the functions as name-value pairs, where the name is the name to use in the output and the value is a function name or definition. For example, here we change the names <code>mean</code> and <code>sd</code> to <code>posterior_mean</code> and <code>posterior_sd</code>.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, posterior_mean <span class="op">=</span> <span class="va">mean</span>, posterior_sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    variable posterior_mean posterior_sd
##    &lt;chr&gt;             &lt;dbl&gt;        &lt;dbl&gt;
##  1 mu                 4.18         3.40
##  2 tau                4.16         3.58
##  3 theta[1]           6.75         6.30
##  4 theta[2]           5.25         4.63
##  5 theta[3]           3.04         6.80
##  6 theta[4]           4.86         4.92
##  7 theta[5]           3.22         5.08
##  8 theta[6]           3.99         5.16
##  9 theta[7]           6.50         5.26
## 10 theta[8]           4.57         5.25</code></pre>
</div>
<div id="using-custom-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#using-custom-functions" class="anchor"></a>Using custom functions</h3>
<p>For a function to work with <code><a href="../reference/draws_summary.html">summarise_draws()</a></code>, it needs to take a vector or matrix of numeric values and return a single numeric value or a named vector of numeric values. Additional arguments to the function can be specified in a list passed to the <code>.args</code> argument.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">weighted_mean</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">wts</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="va">wts</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wts</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span>
  <span class="va">eight_schools_df</span>, 
  <span class="va">weighted_mean</span>, 
  .args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>wts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html">rexp</a></span><span class="op">(</span><span class="fu"><a href="../reference/draws-index.html">ndraws</a></span><span class="op">(</span><span class="va">eight_schools_df</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    variable weighted_mean
##    &lt;chr&gt;            &lt;dbl&gt;
##  1 mu                4.19
##  2 tau               4.04
##  3 theta[1]          6.34
##  4 theta[2]          5.21
##  5 theta[3]          3.33
##  6 theta[4]          4.88
##  7 theta[5]          3.37
##  8 theta[6]          4.09
##  9 theta[7]          6.67
## 10 theta[8]          4.58</code></pre>
</div>
<div id="specifying-functions-using-lambda-like-syntax" class="section level3">
<h3 class="hasAnchor">
<a href="#specifying-functions-using-lambda-like-syntax" class="anchor"></a>Specifying functions using lambda-like syntax</h3>
<p>It is also possible to specify a summary function using a one-sided formula that follows the conventions supported by <code><a href="https://rlang.r-lib.org/reference/as_function.html">rlang::as_function()</a></code>. For example, the function</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>can be simplified to</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># for multiple arguments `.x` and `.y` can be used, see ?rlang::as_function</span>
<span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Both can be used with <code><a href="../reference/draws_summary.html">summarise_draws()</a></code> and produce the same output:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    variable `40%` `60%`
##    &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 mu        3.41  5.35
##  2 tau       2.47  3.96
##  3 theta[1]  4.95  7.01
##  4 theta[2]  4.32  6.13
##  5 theta[3]  2.54  5.33
##  6 theta[4]  3.78  6.11
##  7 theta[5]  2.69  4.69
##  8 theta[6]  2.92  5.47
##  9 theta[7]  4.81  7.33
## 10 theta[8]  3.50  5.92</code></pre>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/draws_summary.html">summarise_draws</a></span><span class="op">(</span><span class="va">eight_schools_df</span>, <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.x</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    variable `40%` `60%`
##    &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 mu        3.41  5.35
##  2 tau       2.47  3.96
##  3 theta[1]  4.95  7.01
##  4 theta[2]  4.32  6.13
##  5 theta[3]  2.54  5.33
##  6 theta[4]  3.78  6.11
##  7 theta[5]  2.69  4.69
##  8 theta[6]  2.92  5.47
##  9 theta[7]  4.81  7.33
## 10 theta[8]  3.50  5.92</code></pre>
<p>See <code><a href="https://rlang.r-lib.org/reference/as_function.html">help("as_function", "rlang")</a></code> for details on specifying these functions.</p>
</div>
<div id="other-diagnostics" class="section level3">
<h3 class="hasAnchor">
<a href="#other-diagnostics" class="anchor"></a>Other diagnostics</h3>
<p>In addition to the default diagnostic functions used by <code><a href="../reference/draws_summary.html">summarise_draws()</a></code> (<code><a href="../reference/rhat.html">rhat()</a></code>, <code><a href="../reference/ess_bulk.html">ess_bulk()</a></code>, <code><a href="../reference/ess_tail.html">ess_tail()</a></code>), posterior also provides additional diagnostics like effective sample sizes and Monte Carlo standard errors for quantiles and standard deviations, an experimental new diagnostic called R*, and others. For a list of available diagnostics and links to their individual help pages see <code><a href="../reference/diagnostics.html">help("diagnostics", "posterior")</a></code>.</p>
<p>If you have suggestions for additional diagnostics that should be implemented in posterior, please open an issue at <a href="https://github.com/stan-dev/posterior/issues" class="uri">https://github.com/stan-dev/posterior/issues</a>.</p>
</div>
</div>
<div id="other-methods-for-working-with-draws-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#other-methods-for-working-with-draws-objects" class="anchor"></a>Other methods for working with <code>draws</code> objects</h2>
<p>In addition to the methods demonstrated in this vignette, posterior has various other methods available for working with <code>draws</code> objects. The following is a (potentially incomplete) list.</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="59%">
</colgroup>
<thead><tr class="header">
<th align="left"><strong>Method</strong></th>
<th align="left"><strong>Description</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code><a href="../reference/order_draws.html">order_draws()</a></code></td>
<td align="left">Order <code>draws</code> objects according to iteration and chain number</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/repair_draws.html">repair_draws()</a></code></td>
<td align="left">Repair indices of <code>draws</code> objects so that iterations chains, and draws are continuously and consistently numbered</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/resample_draws.html">resample_draws()</a></code></td>
<td align="left">Resample <code>draws</code> objects according to provided weights</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/thin_draws.html">thin_draws()</a></code></td>
<td align="left">Thin <code>draws</code> objects to reduce size and autocorrelation</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/weight_draws.html">weight_draws()</a></code></td>
<td align="left">Add weights to draws objects, with one weight per draw, for use in subsequent weighting operations</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/extract_variable.html">extract_variable()</a></code></td>
<td align="left">Extract a vector of draws of a single variable</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/extract_variable.draws_rvars.html">extract_variable_matrix()</a></code></td>
<td align="left">Extract an iterations x chains matrix of draws of a single variable</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/merge_chains.html">merge_chains()</a></code></td>
<td align="left">Merge chains of <code>draws</code> objects into a single chain.</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/split_chains.html">split_chains()</a></code></td>
<td align="left">Split chains of <code>draws</code> objects by halving the number of iterations per chain and doubling the number of chains.</td>
</tr>
</tbody>
</table>
<p>If you have suggestions for additional methods that would be useful for working with <code>draws</code> objects, please open an issue at <a href="https://github.com/stan-dev/posterior/issues" class="uri">https://github.com/stan-dev/posterior/issues</a>.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Gelman A., Carlin J. B., Stern H. S., David B. Dunson D. B., Aki Vehtari A., &amp; Rubin D. B. (2013). <em>Bayesian Data Analysis, Third Edition</em>. Chapman and Hall/CRC.</p>
<p>Vehtari A., Gelman A., Simpson D., Carpenter B., &amp; Bürkner P. C. (2020). Rank-normalization, folding, and localization: An improved Rhat for assessing convergence of MCMC. <em>Bayesian Analysis</em>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Paul-Christian Bürkner, Jonah Gabry, Matthew Kay, Aki Vehtari.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
