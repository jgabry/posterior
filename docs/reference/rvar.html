<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Random variables of arbitrary dimension — rvar • posterior</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Random variables of arbitrary dimension — rvar" />
<meta property="og:description" content="Random variables backed by arrays of arbitrary dimension" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">posterior</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fas fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/posterior">
    <span class="fas fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fas fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Random variables of arbitrary dimension</h1>
    <small class="dont-index">Source: <a href='https://github.com/stan-dev/posterior/blob/master/R/rvar-.R'><code>R/rvar-.R</code></a></small>
    <div class="hidden name"><code>rvar.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Random variables backed by arrays of arbitrary dimension</p>
    </div>

    <pre class="usage"><span class='fu'>rvar</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/double.html'>double</a></span><span class='op'>(</span><span class='op'>)</span>, dim <span class='op'>=</span> <span class='cn'>NULL</span>, dimnames <span class='op'>=</span> <span class='cn'>NULL</span>, nchains <span class='op'>=</span> <span class='fl'>1L</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A vector or array where the first dimension represents draws from
a distribution. The resulting <code>rvar</code> will have dimension <code>dim(x)[-1]</code>; that is,
everything except the first dimension is used for the shape of the variable, and the
first dimension is used to index draws from the distribution.</p></td>
    </tr>
    <tr>
      <th>dim</th>
      <td><p>Override for the dimensions of the <code>rvar</code> to be created (see <code><a href='https://rdrr.io/r/base/dim.html'>dim()</a></code>): an integer vector of length one
or more giving the maximal indices in each dimension. If <code>NULL</code> (the default), this is determined by the input.
<strong>NOTE:</strong> This argument controls the dimensions of the <code>rvar</code>, not the underlying array, so you cannot
change the number of draws using this argument.</p></td>
    </tr>
    <tr>
      <th>dimnames</th>
      <td><p>Override for the names of the dimensions of the <code>rvar</code> to be created (see <code><a href='https://rdrr.io/r/base/dimnames.html'>dimnames()</a></code>): a list of character
vectors giving the names in each dimension. If <code>NULL</code> (the default), this is determined by the input.
<strong>NOTE:</strong> This argument controls the names of the dimensions of the <code>rvar</code>, not the underlying array.</p></td>
    </tr>
    <tr>
      <th>nchains</th>
      <td><p>Number of chains (default is <code>1</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>"rvar"</code> representing a random variable.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>"rvar"</code> class internally represents random variables as arrays of arbitrary
dimension, where the first dimension is used to index draws from the distribution.
Most mathematical operators and functions are supported, including efficient matrix
multiplication and vector and array-style indexing. The intent is that an <code>rvar</code>
works as closely as possible to how a base vector/matrix/array does, with a few
differences:</p><ul>
<li><p>The default behavior when subsetting is not to drop extra dimensions (i.e.
the default <code>drop</code> argument for <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> is <code>FALSE</code>, not <code>TRUE</code>).</p></li>
<li><p>Rather than base R-style recycling, <code>rvar</code>s use a limited form of broadcasting:
if an operation is being performed on two vectors with different size of the same
dimension, the smaller vector will be recycled up to the size of the larger one
along that dimension so long as it has size 1.</p></li>
</ul>

<p>For functions that expect base numeric arrays and for which <code>rvar</code>s cannot be
used directly as arguments, you can use <code><a href='rfun.html'>rfun()</a></code> or <code><a href='rdo.html'>rdo()</a></code> to translate your
code into code that executes across draws from one or more random variables
and returns a random variable as output. Typically <code><a href='rdo.html'>rdo()</a></code> offers the most
straightforward translation.</p>
<p>As <code><a href='rfun.html'>rfun()</a></code> and <code><a href='rdo.html'>rdo()</a></code> incur some performance cost, you can also operate directly
on the underlying array using the <code><a href='draws_of.html'>draws_of()</a></code> function. To re-use existing
random number generator functions to efficiently create <code>rvar</code>s, use <code><a href='rvar_rng.html'>rvar_rng()</a></code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='as_rvar.html'>as_rvar()</a></code> to convert objects to <code>rvar</code>s. See <code><a href='rdo.html'>rdo()</a></code>, <code><a href='rfun.html'>rfun()</a></code>, and
<code><a href='rvar_rng.html'>rvar_rng()</a></code> for higher-level interfaces for creating <code>rvar</code>s.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># To create a "scalar" `rvar`, pass a one-dimensional array or a vector</span>
<span class='co'># whose length (here `4000`) is the desired number of draws:</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>rvar</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>4000</span>, mean <span class='op'>=</span> <span class='fl'>1</span>, sd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt; rvar&lt;4000&gt;[1] <span style='color: #949494;'>mean ± sd:</span><span>
#&gt; [1] 1 ± 0.99 </div><div class='input'>
<span class='co'># Create random vectors by adding an additional dimension:</span>
<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>4</span>   <span class='co'># length of output vector</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>rvar</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>4000</span> <span class='op'>*</span> <span class='va'>n</span>, mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>n</span>, each <span class='op'>=</span> <span class='fl'>4000</span><span class='op'>)</span>, sd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>, dim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4000</span>, <span class='va'>n</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt; rvar&lt;4000&gt;[4] </span><span style='color: #949494;'>mean ± sd:</span><span>
#&gt; [1] 1 ± 0.98  2 ± 1.00  3 ± 0.97  4 ± 0.98 </div><div class='input'>
<span class='co'># Create a random matrix:</span>
<span class='va'>rows</span> <span class='op'>&lt;-</span> <span class='fl'>4</span>
<span class='va'>cols</span> <span class='op'>&lt;-</span> <span class='fl'>3</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>rvar</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>4000</span> <span class='op'>*</span> <span class='va'>rows</span> <span class='op'>*</span> <span class='va'>cols</span>, mean <span class='op'>=</span> <span class='fl'>1</span>, sd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>, dim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4000</span>, <span class='va'>rows</span>, <span class='va'>cols</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt; rvar&lt;4000&gt;[4,3] </span><span style='color: #949494;'>mean ± sd:</span><span>
#&gt;      [,1]         [,2]         [,3]        
#&gt; [1,] 1.03 ± 0.99  1.00 ± 1.00  1.00 ± 0.97 
#&gt; [2,] 1.01 ± 0.99  1.01 ± 0.99  0.99 ± 1.00 
#&gt; [3,] 0.99 ± 1.00  1.02 ± 0.99  1.02 ± 1.01 
#&gt; [4,] 0.99 ± 1.00  0.99 ± 1.02  1.01 ± 1.01 </div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner, Jonah Gabry, Matthew Kay, Aki Vehtari.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


