<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Resample draws objects — resample_draws • posterior</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Resample draws objects — resample_draws" />
<meta property="og:description" content="Resample draws objects according to provided weights, for example weights
obtained through importance sampling." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">posterior</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fas fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/posterior">
    <span class="fas fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fas fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Resample <code>draws</code> objects</h1>
    <small class="dont-index">Source: <a href='https://github.com/stan-dev/posterior/blob/master/R/resample_draws.R'><code>R/resample_draws.R</code></a></small>
    <div class="hidden name"><code>resample_draws.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Resample <code><a href='draws.html'>draws</a></code> objects according to provided weights, for example weights
obtained through importance sampling.</p>
    </div>

    <pre class="usage"><span class='fu'>resample_draws</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for draws</span>
<span class='fu'>resample_draws</span><span class='op'>(</span><span class='va'>x</span>, weights <span class='op'>=</span> <span class='cn'>NULL</span>, method <span class='op'>=</span> <span class='st'>"stratified"</span>, ndraws <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>(draws) A <code>draws</code> object or another <span style="R">R</span> object for which the method
is defined.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to individual methods (if applicable).</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>(numeric vector) A vector of positive weights of length
<code><a href='draws-index.html'>ndraws(x)</a></code>. The weights will be internally normalized. If <code>weights</code> is not
specified, an attempt will be made to extract any weights already stored in
the draws object (via <code><a href='weight_draws.html'>weight_draws()</a></code>). How exactly the weights influence
the resampling depends on the <code>method</code> argument.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>(string) The resampling method to use:</p><ul>
<li><p><code>"simple"</code>: simple random resampling with replacement</p></li>
<li><p><code>"simple_no_replace"</code>: simple random resampling without replacement</p></li>
<li><p><code>"stratified"</code>: stratified resampling with replacement</p></li>
<li><p><code>"deterministic"</code>: deterministic resampling with replacement</p></li>
</ul>

<p>Currently, <code>"stratified"</code> is the default as it has comparably low variance
and bias with respect to ideal resampling. The latter would sample perfectly
proportional to the weights, but this is not possible in practice due to the
finite number of draws available. For more details about resampling methods,
see Kitagawa (1996).</p></td>
    </tr>
    <tr>
      <th>ndraws</th>
      <td><p>(positive integer) The number of draws to be returned. By
default <code>ndraws</code> is set internally to the total number of draws in <code>x</code> if
sensible.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>draws</code> object of the same class as <code>x</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Upon usage of <code>resample_draws()</code>, chains will automatically be merged
due to subsetting of individual draws (see <code><a href='subset_draws.html'>subset_draws</a></code> for details).
Also, weights stored in the <code>draws</code> object will be removed in the process,
as resampling invalidates existing weights.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Kitagawa, G., Monte Carlo Filter and Smoother for Non-Gaussian Nonlinear '
State Space Models, <em>Journal of Computational and Graphical Statistics</em>,
5(1):1-25, 1996.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>resample_draws()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='draws_df.html'>as_draws_df</a></span><span class='op'>(</span><span class='fu'><a href='example_draws.html'>example_draws</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># random weights for justr for demonstration</span>
<span class='va'>w</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fu'><a href='draws-index.html'>ndraws</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, <span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='co'># use default stratified sampling</span>
<span class='va'>x_rs</span> <span class='op'>&lt;-</span> <span class='fu'>resample_draws</span><span class='op'>(</span><span class='va'>x</span>, weights <span class='op'>=</span> <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Merging chains in order to subset via 'draw'.</span></div><div class='input'><span class='fu'><a href='draws_summary.html'>summarise_draws</a></span><span class='op'>(</span><span class='va'>x_rs</span>, <span class='fu'><a href='draws_summary.html'>default_summary_measures</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 10 x 7</span><span>
#&gt;    variable  mean median    sd   mad      q5   q95
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> mu        4.24   4.59  3.45  3.25  -</span><span style='color: #BB0000;'>1.17</span><span>   9.48
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> tau       4.54   3.49  3.81  3.29   0.307 11.7 
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> theta[1]  7.08   6.23  6.51  5.22  -</span><span style='color: #BB0000;'>1.16</span><span>  19.3 
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> theta[2]  5.37   5.13  4.94  4.03  -</span><span style='color: #BB0000;'>2.32</span><span>  14.2 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> theta[3]  2.96   4.13  7.31  5.22 -</span><span style='color: #BB0000;'>11.1</span><span>   12.0 
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> theta[4]  5.10   5.24  5.01  4.32  -</span><span style='color: #BB0000;'>3.63</span><span>  12.3 
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> theta[5]  2.89   3.57  5.35  4.54  -</span><span style='color: #BB0000;'>7.60</span><span>  10.8 
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> theta[6]  3.88   4.34  5.34  5.00  -</span><span style='color: #BB0000;'>6.04</span><span>  11.1 
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> theta[7]  6.88   6.73  5.29  4.60  -</span><span style='color: #BB0000;'>1.15</span><span>  15.4 
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> theta[8]  4.60   4.73  5.71  5.23  -</span><span style='color: #BB0000;'>5.31</span><span>  14.5 </div><div class='input'>
<span class='co'># use simple random sampling</span>
<span class='va'>x_rs</span> <span class='op'>&lt;-</span> <span class='fu'>resample_draws</span><span class='op'>(</span><span class='va'>x</span>, weights <span class='op'>=</span> <span class='va'>w</span>, method <span class='op'>=</span> <span class='st'>"simple"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Merging chains in order to subset via 'draw'.</span></div><div class='input'><span class='fu'><a href='draws_summary.html'>summarise_draws</a></span><span class='op'>(</span><span class='va'>x_rs</span>, <span class='fu'><a href='draws_summary.html'>default_summary_measures</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 10 x 7</span><span>
#&gt;    variable  mean median    sd   mad      q5   q95
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> mu        3.95   4.08  3.51  4.00  -</span><span style='color: #BB0000;'>1.16</span><span>   8.74
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> tau       4.25   3.18  3.66  2.66   0.332 11.4 
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> theta[1]  7.04   6.06  6.71  5.72  -</span><span style='color: #BB0000;'>1.19</span><span>  20.1 
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> theta[2]  4.66   4.73  4.68  4.51  -</span><span style='color: #BB0000;'>2.60</span><span>  12.4 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> theta[3]  2.77   4.16  7.50  5.46 -</span><span style='color: #BB0000;'>11.1</span><span>   11.6 
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> theta[4]  4.99   5.50  4.89  4.49  -</span><span style='color: #BB0000;'>2.65</span><span>  12.2 
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> theta[5]  2.66   3.49  5.34  4.86  -</span><span style='color: #BB0000;'>6.86</span><span>  10.6 
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> theta[6]  3.71   4.07  5.14  4.92  -</span><span style='color: #BB0000;'>4.98</span><span>  10.8 
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> theta[7]  6.45   5.92  5.34  4.60  -</span><span style='color: #BB0000;'>1.43</span><span>  14.8 
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> theta[8]  4.34   4.76  5.56  5.22  -</span><span style='color: #BB0000;'>5.29</span><span>  13.2 </div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner, Jonah Gabry, Matthew Kay, Aki Vehtari.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


